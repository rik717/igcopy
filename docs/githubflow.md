# リリース運用ルール(作成中)
---

## github運用
GitHub Flowを採用する。<br/>
major version変更をともなう場合は、別reposiotyを構築する。

### brunch(分岐)役割
|ブランチ|説明|
| --- | ---|
| main | プロダクトリリースおよび開発を行なうためのブランチ。リリースはタグ付けにより区別する。mainブランチへのマージは権限のあるもののみが実施する。|
| feature | mainから分岐し、コンパイルエラーと責任者レビューを実施したらmainにマージする。featureブランチ作成は誰でも行なうことができる。mainブランチへのマージが実施されたらブランチの削除を行なう。|

### アクタ
|役割|説明|
|---|---|
|リリース責任者|mainブランチに対して、releaseタグの付与を行なう。<br/>fshファイルに対するversion,statusの一括変更等を行なう。|
|マージ責任者|freature→mainへのブランチマージを実施する。<br/>各SWGにて最低１名のMainブランチに対するマージ担当者を用意する。|
|ソース修正者|featureブランチに対する修正を行なう。<br/>原則、誰が行なってもよい。SWGを超える(**FHIR WG以外の修正を受け入れる？**)|

### 修正の流れ
* 修正者はfeatureブランチを作成しソース修正を行う。
* 修正者は修正が完了した時点で、マージ責任者に修正が終わった旨を伝達する。
  * 通知前に完了前にコンパイルを行ないビルドエラーが発生いないかを確認する。
  * 修正完了の報告の手段としてPull Requestを利用することも可能とする。
    * Pull Request作成時に競合が起きていないかを確認すること。
    * Pull Reqseust発行の際に、なるべくレビュー者を設定すること。

* マージ責任者は修正内容を確認し、Mainブランチにマージを実施する。
  * マージ方法はPull Requestおよび手動マージのどちらでも可能
  * マージが終わったら、featureブランチを削除を行なう。
  * マージ後ビルドが通らなくなった場合は、速やかに対策を講じること。

### コンフリクト発生時の対処
* 先勝ちルールであるため、マージする側が考慮して修正する。
* マージの判別が付かない場合は、Slack等でサポートを依頼する。

### featureブランチ命名規則
現在どのような修正を行なっているのかを分かりしやすくするため、ブランチ名の一部にSWG名称を一部入れることとする。
#### SWG関連の修正
feature/swg[1-6]-(修正内容) 

```
git checkout -b feature/swg3-JP_Patient_Raceの見直し
```

#### SWG関連に属さない（跨る）修正
feature/ext-(修正内容)

```
git checkout -b feature/ext-versionの一括変更
```

### 
* コンフリクトを起さないために細かく分岐・マージを繰り返すこと。
* 作業を明確化するために１日１回以上リモートブランチに対してコミットを行なうこと。
